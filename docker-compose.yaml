version:  '3'
services:
  datascience-notebook:
    image:    jupyter/datascience-notebook
    volumes:
      - ${HOME}:/home
      - ${LOCAL_DATASETS}:/home/data
      - ${LOCAL_notebook}:/home/notebook
      - ${LOCAL_SSL_CERTS}:/etc/ssl/notebook
    ports:
      - ${PORT}:8888
    container_name:   jupyter_notebook
    command: "start-notebook.sh \
      --NotebookApp.password=${ACCESS_TOKEN} \
      --NotebookApp.certfile=/etc/ssl/notebook/jupyter.pem"
    links:
        - db
    depends_on:
        - db
  db:
    image:
        postgres
    restart:
        always
    environment:
        POSTGRES_USER:
            pythonist
        POSTGRES_PASSWORD:
            password
        POSTGRES_DB:
            mypyenv
    ports:
        - "5432"
    container_name:
        postgres-db
    volumes:
        - ./postgres-db:/var/lib/postgresql/data
        - ./docker-entrypoint-initdb.d:/docker-entrypoint-initdb.d
